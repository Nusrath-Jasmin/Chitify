"use strict";(self.webpackChunkchitify=self.webpackChunkchitify||[]).push([[663],{9663:(F,g,o)=>{o.r(g),o.d(g,{AdminModule:()=>k});var a=o(6814),l=o(9310),t=o(9291),f=o(7864),p=o(9862);let h=(()=>{class s{constructor(e){this.http=e,this.apiUrl="http://localhost:3000"}getRequest(){const e=`${this.apiUrl}/admin/getAllRequest`,n=new p.WM({"Content-Type":"application/json"});return this.http.get(e,{headers:n})}getUserDetails(e){const n=`${this.apiUrl}/admin/getUserDetails`,i=new p.WM({"Content-Type":"application/json"});return this.http.post(n,e,{headers:i})}AddAsOwner(e){const n=`${this.apiUrl}/admin/AddAsOwner`,i=new p.WM({"Content-Type":"application/json"});return this.http.post(n,e,{headers:i})}RejectRequest(e){const n=`${this.apiUrl}/admin/RejectRequest`,i=new p.WM({"Content-Type":"application/json"});return this.http.post(n,e,{headers:i})}getUsers(){return this.http.get(`${this.apiUrl}/admin/list-users`)}getChits(){return this.http.get(`${this.apiUrl}/admin/list-chits`)}static#t=this.\u0275fac=function(n){return new(n||s)(t.LFG(p.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac})}return s})();var m=o(5619);let d=(()=>{class s{constructor(){this.Request=new m.X(null),this.RequestArray$=this.Request.asObservable()}setData1(e){this.Request.next(e)}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac})}return s})();function x(s,r){if(1&s&&(t.TgZ(0,"div",6),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Oqu(e.noOfRequest)}}const _=function(){return["/admin/home/requests"]};let Z=(()=>{class s{constructor(e,n,i,c,u){this.userToken=e,this.router=n,this.apiCall=i,this.dataService=c,this.route=u,this.request=[]}ngOnInit(){this.apiCall.getRequest().subscribe({next:e=>{this.request=e,this.noOfRequest=this.request.length,this.dataService.setData1(this.request)},error:e=>{this.request=[]}})}onclick(){this.router.navigate(["requests"],{relativeTo:this.route})}logout(){this.userToken.destroyToken(),this.router.navigate(["/login"])}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(f.e),t.Y36(l.F0),t.Y36(h),t.Y36(d),t.Y36(l.gz))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-navbar"]],decls:9,vars:3,consts:[[1,"p-5","bg-[#dfdfdf]","shadow-[#878282]","shadow-md","rounded-lg","flex","items-center","justify-between"],[1,"fa-solid","fa-bars","text-2xl"],[1,"flex","items-center","gap-1"],[3,"routerLink"],["class","w-5 h-5 bg-red-700 rounded-full text-white flex items-center justify-center",4,"ngIf"],[3,"click"],[1,"w-5","h-5","bg-red-700","rounded-full","text-white","flex","items-center","justify-center"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div"),t._UZ(2,"i",1),t.qZA(),t.TgZ(3,"div",2)(4,"a",3),t._uU(5,"Requests"),t.qZA(),t.YNc(6,x,2,1,"div",4),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return i.logout()}),t._uU(8,"Logout"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("routerLink",t.DdM(2,_)),t.xp6(2),t.Q6J("ngIf",i.noOfRequest))},dependencies:[a.O5,l.rH]})}return s})(),b=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-sidebar"]],decls:12,vars:0,consts:[[1,"h-full","shadow-xl","shadow-black","rounded-xl","overflow-hidden"],[1,"h-1/4","w-full","flex","items-center","justify-center","flex-col"],["src","../../../assets/images/user.jpg","alt","",1,"w-28","h-28","rounded-full"],["href",""],[1,"flex","items-center","flex-col","p-5"],[1,"p-5","shadow-[#dfdfdf]","shadow-md","rounded-xl","text-lg","w-52","text-center","hover:bg-[#dfe0c9]"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"a",3),t._uU(4,"Edit Profile"),t.qZA()(),t.TgZ(5,"div",4)(6,"a",5),t._uU(7,"Users"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"a",5),t._uU(10," Chitties"),t.qZA(),t._UZ(11,"br"),t.qZA()())}})}return s})(),q=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-adminhome"]],decls:5,vars:0,consts:[[1,"w-screen","h-screen","px-5","py-2","flex","space-x-4","overflow-hidden"],[1,"w-1/5"],[1,"w-full","h-full","flex","flex-col","gap-2"],[1,"w-full","h-20"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"app-sidebar",1),t.TgZ(2,"div",2),t._UZ(3,"app-navbar",3)(4,"router-outlet"),t.qZA()())},dependencies:[l.lC,Z,b]})}return s})();var T=o(8782);function U(s,r){1&s&&t._UZ(0,"app-spinner")}function v(s,r){1&s&&t._UZ(0,"app-spinner")}function A(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"tr",6)(1,"td",7),t._uU(2),t.qZA(),t.TgZ(3,"td",7)(4,"div",8),t._uU(5),t._UZ(6,"br"),t._uU(7),t._UZ(8,"br"),t._uU(9),t._UZ(10,"br"),t._uU(11),t._UZ(12,"br"),t._uU(13),t._UZ(14,"br"),t.qZA()(),t.TgZ(15,"td",9)(16,"button",10),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.seeMore(c.userId))}),t._uU(17),t.qZA(),t.TgZ(18,"button",11),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.acceptRequest(c._id))}),t._uU(19," Accept "),t.qZA(),t.YNc(20,U,1,0,"app-spinner",5),t.TgZ(21,"button",12),t.NdJ("click",function(){const c=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.reject(c._id))}),t._uU(22," Reject "),t.qZA(),t.YNc(23,v,1,0,"app-spinner",5),t.qZA()()}if(2&s){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e._id),t.xp6(3),t.hij(" ",e.street," "),t.xp6(2),t.hij(" ",e.city," "),t.xp6(2),t.hij(" ",e.state," "),t.xp6(2),t.hij(" ",e.pin," "),t.xp6(2),t.hij(" ",e.country," "),t.xp6(4),t.hij(" ",n.buttonText," "),t.xp6(3),t.Q6J("ngIf",n.isLoading),t.xp6(3),t.Q6J("ngIf",n.isLoading)}}function y(s,r){if(1&s&&(t.TgZ(0,"tr")(1,"div")(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()()()),2&s){const e=t.oxw();t.xp6(3),t.hij("First Name: ",e.res.firstName,""),t.xp6(2),t.hij("Last Name: ",e.res.lastName,""),t.xp6(2),t.hij("Email: ",e.res.email,""),t.xp6(2),t.hij("Phone: ",e.res.phone,"")}}function w(s,r){if(1&s&&(t.TgZ(0,"tr")(1,"td",3),t._uU(2),t.qZA(),t.TgZ(3,"td",3),t._uU(4),t.qZA(),t.TgZ(5,"td",3),t._uU(6),t.qZA()()),2&s){const e=r.$implicit;t.Gre("",r.index%2==0?"bg-gray-100":"bg-white"," text-center"),t.xp6(2),t.AsE("",e.firstName," ",e.lastName,""),t.xp6(2),t.Oqu(e.phone),t.xp6(2),t.Oqu(e.email)}}function j(s,r){if(1&s&&(t.TgZ(0,"tr")(1,"td",3),t._uU(2),t.qZA(),t.TgZ(3,"td",3),t._uU(4),t.qZA(),t.TgZ(5,"td",3),t._uU(6),t.qZA(),t.TgZ(7,"td",3),t._uU(8),t.ALo(9,"date"),t.qZA()()),2&s){const e=r.$implicit;t.Gre("",r.index%2==0?"bg-gray-100":"bg-white"," text-center"),t.xp6(2),t.Oqu(e.chitName),t.xp6(2),t.Oqu(e.duration),t.xp6(2),t.Oqu(e.monthlyPayment),t.xp6(2),t.Oqu(t.xi3(9,7,e.startDate,"mediumDate"))}}const O=[{path:"home",component:q,children:[{path:"requests",component:(()=>{class s{constructor(e,n){this.dataService=e,this.apiService=n,this.seeMoreClicked=!1,this.buttonText="See More",this.isLoading=!1}ngOnInit(){this.dataService.RequestArray$.subscribe(e=>this.requests=e)}seeMore(e){console.log(e),this.seeMoreClicked?(this.seeMoreClicked=!1,this.buttonText="See More"):(this.seeMoreClicked=!0,this.buttonText="See Less"),this.seeMoreClicked&&this.apiService.getUserDetails({userid:e}).subscribe({next:i=>{console.log(i),this.res=i},error:i=>{}})}acceptRequest(e){this.isLoading=!0,this.apiService.AddAsOwner({requestid:e}).subscribe({next:i=>{this.isLoading=!1,console.log(i),this.refreshComponentData()},error:i=>{console.log(i)}})}reject(e){this.isLoading=!0,this.apiService.RejectRequest({requestid:e}).subscribe({next:i=>{this.isLoading=!1,console.log(i),this.refreshComponentData()},error:i=>{console.log(i)}})}refreshComponentData(){this.apiService.getRequest().subscribe(e=>this.requests=e),console.log(this.requests)}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(d),t.Y36(h))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-requests"]],decls:13,vars:2,consts:[[1,"overflow-x-auto"],[1,"table-auto","min-w-full","border-collapse","border","border-purple-950"],[1,"bg-purple-950","text-white"],[1,"px-4","py-2","w-1/3"],["class","bg-white border-b border-gray-200",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bg-white","border-b","border-gray-200"],[1,"px-4","py-2","text-center","w-1/3"],[1,"text-center"],[1,"px-4","py-2","space-x-3","text-center","w-1/3"],[1,"px-4","py-2","bg-blue-500","text-white","rounded","hover:bg-blue-600","focus:outline-none","focus:bg-blue-600",3,"click"],[1,"px-4","py-2","bg-green-500","text-white","rounded","hover:bg-green-600","focus:outline-none","focus:bg-green-600",3,"click"],[1,"px-4","py-2","bg-red-500","text-white","rounded","hover:bg-red-600","focus:outline-none","focus:bg-green-600",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5,"Request ID"),t.qZA(),t.TgZ(6,"th",3),t._uU(7,"Details"),t.qZA(),t.TgZ(8,"th",3),t._uU(9,"Action"),t.qZA()()(),t.TgZ(10,"tbody"),t.YNc(11,A,24,9,"tr",4),t.YNc(12,y,10,4,"tr",5),t.qZA()()()),2&n&&(t.xp6(11),t.Q6J("ngForOf",i.requests),t.xp6(1),t.Q6J("ngIf",i.seeMoreClicked))},dependencies:[a.sg,a.O5,T.O],styles:["tr[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}"]})}return s})()},{path:"all-users",component:(()=>{class s{constructor(e){this.apiservice=e,this.users=[]}ngOnInit(){this.apiservice.getUsers().subscribe({next:e=>{this.users=e},error:e=>{this.users=[]}})}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(h))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-all-users"]],decls:12,vars:1,consts:[[1,"w-full","flex","items-center","justify-center"],[1,"w-3/4","border","border-gray-500"],[1,"bg-gray-200","text-center"],[1,"px-4","py-2"],[3,"class",4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5,"Name"),t.qZA(),t.TgZ(6,"th",3),t._uU(7,"Phone"),t.qZA(),t.TgZ(8,"th",3),t._uU(9,"Email"),t.qZA()()(),t.TgZ(10,"tbody"),t.YNc(11,w,7,7,"tr",4),t.qZA()()()),2&n&&(t.xp6(11),t.Q6J("ngForOf",i.users))},dependencies:[a.sg]})}return s})()},{path:"all-chits",component:(()=>{class s{constructor(e){this.apiservice=e,this.chits=[]}ngOnInit(){this.apiservice.getChits().subscribe({next:e=>{this.chits=e},error:e=>{this.chits=[]}})}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(h))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-all-chits"]],decls:14,vars:1,consts:[[1,"w-full","flex","items-center","justify-center"],[1,"w-3/4","border","border-gray-500"],[1,"bg-gray-200","text-center"],[1,"px-4","py-2"],[3,"class",4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5,"Chit Name"),t.qZA(),t.TgZ(6,"th",3),t._uU(7,"Duration"),t.qZA(),t.TgZ(8,"th",3),t._uU(9,"Monthly Payment"),t.qZA(),t.TgZ(10,"th",3),t._uU(11,"Starting Date"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,j,10,10,"tr",4),t.qZA()()()),2&n&&(t.xp6(13),t.Q6J("ngForOf",i.chits))},dependencies:[a.sg,a.uU]})}return s})()}]}];let N=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.oAB({type:s});static#s=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(O),l.Bz]})}return s})();var M=o(2456);let k=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.oAB({type:s});static#s=this.\u0275inj=t.cJS({providers:[h,d],imports:[a.ez,N,M.p]})}return s})()}}]);
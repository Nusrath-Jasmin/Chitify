"use strict";(self.webpackChunkchitify=self.webpackChunkchitify||[]).push([[24],{24:(pe,q,h)=>{h.r(q),h.d(q,{UserModule:()=>ue});var m=h(9310),t=h(9291),k=h(7864);const O=function(){return["/user/home/invitation-to-join"]};let N=(()=>{class n{constructor(e,i){this.userToken=e,this.router=i}logout(){this.userToken.destroyToken(),this.router.navigate(["/login"])}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(k.e),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-navbar"]],decls:7,vars:2,consts:[[1,"p-5","bg-[#dfdfdf]","shadow-[#878282]","shadow-md","rounded-lg","flex","items-center","justify-between"],[1,"fa-solid","fa-bars","text-2xl"],[3,"routerLink"],[3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div"),t._UZ(2,"i",1),t.qZA(),t.TgZ(3,"a",2),t._uU(4,"Requests To Join"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.logout()}),t._uU(6,"Logout"),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("routerLink",t.DdM(1,O)))},dependencies:[m.rH]})}return n})();var u=h(9862);let f=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:3000"}confirmEmail(){const e=`${this.apiUrl}/user/confirmEmail`,i=new u.WM({"Content-Type":"application/json"});return this.http.post(e,{headers:i})}verifyEmailOtp(e){const i=`${this.apiUrl}/user/verifyEmailOtp`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}checkEmailverifiedOrNot(){const e=`${this.apiUrl}/user/checkEmailverifiedOrNot`,i=new u.WM({"Content-Type":"application/json"});return this.http.get(e,{headers:i})}applyForOwnerPosition(e){const i=`${this.apiUrl}/user/applyForChitOwnership`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}RequestSubmittedorNot(){const e=`${this.apiUrl}/user/RequestSubmittedorNot`,i=new u.WM({"Content-Type":"application/json"});return this.http.get(e,{headers:i})}isOwner(){const e=`${this.apiUrl}/user/isOwner`,i=new u.WM({"Content-Type":"application/json"});return this.http.get(e,{headers:i})}RegisterChit(e){const i=`${this.apiUrl}/user/RegisterChit`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}OwnedChitties(){const e=`${this.apiUrl}/user/OwnedChitties`,i=new u.WM({"Content-Type":"application/json"});return this.http.get(e,{headers:i})}UpdateChitty(e){const i=`${this.apiUrl}/user/UpdateChitty`,o=new u.WM({"Content-Type":"application/json"});return this.http.put(i,e,{headers:o})}DeleteChitty(e){const i=`${this.apiUrl}/user/DeleteChitty/${e}`,o=new u.WM({"Content-Type":"application/json"});return this.http.delete(i,{headers:o})}OpenChitties(){const e=`${this.apiUrl}/user/openChitties`,i=new u.WM({"Content-Type":"application/json"});return this.http.get(e,{headers:i})}IsAMember(e){const i=`${this.apiUrl}/user/IsAMember/${e}`,o=new u.WM({"Content-Type":"application/json"});return this.http.get(i,{headers:o})}IsRequested(e){const i=`${this.apiUrl}/user/IsRequested/${e}`,o=new u.WM({"Content-Type":"application/json"});return this.http.get(i,{headers:o})}SubmitRequest(e){const i=`${this.apiUrl}/user/SubmitRequest`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}getRequest(e){const i=`${this.apiUrl}/user/getRequests/${e}`,o=new u.WM({"Content-Type":"application/json"});return this.http.get(i,{headers:o})}getUser(e){const i=`${this.apiUrl}/user/getUser/${e}`,o=new u.WM({"Content-Type":"application/json"});return this.http.get(i,{headers:o})}AcceptRequest(e){console.log(e);const i=`${this.apiUrl}/user/AcceptRequest`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}RejectRequest(e){console.log(e);const i=`${this.apiUrl}/user/RejectRequest`,o=new u.WM({"Content-Type":"application/json"});return this.http.put(i,e,{headers:o})}getParticipants(e){const i=`${this.apiUrl}/user/getParticipants/${e}`,o=new u.WM({"Content-Type":"application/json"});return this.http.get(i,{headers:o})}removeUser(e){const i=`${this.apiUrl}/user/removeUser`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}getUsersToAdd(e){const i=`${this.apiUrl}/user/getUsersToAdd/${e}`,o=new u.WM({"Content-Type":"application/json"});return this.http.get(i,{headers:o})}sendInvitation(e){const i=`${this.apiUrl}/user/sendInvitation`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}getInvitations(){const e=`${this.apiUrl}/user/invitations`,i=new u.WM({"Content-Type":"application/json"});return this.http.get(e,{headers:i})}acceptInvitation(e){const i=`${this.apiUrl}/user/acceptInvitation`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}rejectInvitation(e){const i=`${this.apiUrl}/user/rejectInvitation`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}updateProfile(e){return this.http.post(`${this.apiUrl}/user/updateProfile`,e)}userProfile(){return this.http.get(`${this.apiUrl}/user/userProfile`)}JoinedChits(){return this.http.get(`${this.apiUrl}/user/allJoinedChits`)}getMonthlyStatus(e){return this.http.get(`${this.apiUrl}/user/getMonthlyStatus/${e}`)}createRazPayOrder(e){const i=`${this.apiUrl}/user/createOrder`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}onsuccessPayment(e){const i=`${this.apiUrl}/user/onSuccessPayment`,o=new u.WM({"Content-Type":"application/json"});return this.http.post(i,e,{headers:o})}getUSerWhoPaid(e){return this.http.get(`${this.apiUrl}/user/getUsersWhoPaid/${e}`)}getWinners(e){return this.http.get(`${this.apiUrl}/user/getWinners/${e}`)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(u.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();var p=h(6814);function S(n,r){if(1&n&&t._UZ(0,"img",8),2&n){const e=t.oxw();t.Q6J("src",e.user.profilePicture,t.LSH)}}function j(n,r){1&n&&t._UZ(0,"img",9)}const M=function(){return["/user/home/update-profile"]},J=function(){return["/user/home/owned-chitties"]},F=function(){return["/user/home/joined-chits"]},P=function(){return["/user/home/open-chitties"]},D=function(){return["/user/home/start-chitty"]};let Y=(()=>{class n{constructor(e,i,o){this.apicall=e,this.router=i,this.route=o}ngOnInit(){this.apicall.userProfile().subscribe({next:e=>{this.user=e,console.log(this.user)},error:e=>this.user=[]})}beAnOwner(){this.apicall.checkEmailverifiedOrNot().subscribe({next:e=>{console.log(e),e.email?this.router.navigate(["beanowner"],{relativeTo:this.route}):(console.log(e),this.router.navigate(["confirm-email"],{relativeTo:this.route}))},error:e=>{}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(m.F0),t.Y36(m.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-sidebar"]],decls:23,vars:13,consts:[[1,"h-full","shadow-xl","shadow-black","rounded-xl","overflow-hidden"],[1,"h-1/4","w-full","flex","items-center","justify-center","flex-col"],["alt","Profile Picture","class","w-28 h-28 rounded-full",3,"src",4,"ngIf"],["src","../../../assets/images/user.jpg","alt","Default Profile Picture","class","w-28 h-28 rounded-full",4,"ngIf"],[1,"text-blue-700","cursor-pointer",3,"routerLink"],[1,"flex","items-center","flex-col","p-5"],[1,"p-5","shadow-[#dfdfdf]","shadow-md","rounded-xl","text-lg","w-52","text-center","hover:bg-[#dfe0c9]",3,"routerLink"],[1,"p-5","shadow-[#dfdfdf]","shadow-md","rounded-xl","text-lg","w-52","text-center","hover:bg-[#dfe0c9]",3,"click"],["alt","Profile Picture",1,"w-28","h-28","rounded-full",3,"src"],["src","../../../assets/images/user.jpg","alt","Default Profile Picture",1,"w-28","h-28","rounded-full"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,S,1,1,"img",2),t.YNc(3,j,1,0,"img",3),t.TgZ(4,"p"),t._uU(5),t.qZA(),t.TgZ(6,"a",4),t._uU(7,"Edit Profile"),t.qZA()(),t.TgZ(8,"div",5)(9,"a",6),t._uU(10,"Owned Chitties"),t.qZA(),t._UZ(11,"br"),t.TgZ(12,"a",6),t._uU(13,"Joined Chitties"),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"a",6),t._uU(16,"Open Chitties"),t.qZA(),t._UZ(17,"br"),t.TgZ(18,"a",7),t.NdJ("click",function(){return o.beAnOwner()}),t._uU(19,"Be an Owner"),t.qZA(),t._UZ(20,"br"),t.TgZ(21,"a",6),t._uU(22,"Start a Chitty"),t.qZA()()()),2&i&&(t.xp6(2),t.Q6J("ngIf",o.user&&o.user.profilePicture),t.xp6(1),t.Q6J("ngIf",!o.user||!o.user.profilePicture),t.xp6(2),t.Oqu(null==o.user?null:o.user.firstName),t.xp6(1),t.Q6J("routerLink",t.DdM(8,M)),t.xp6(3),t.Q6J("routerLink",t.DdM(9,J)),t.xp6(3),t.Q6J("routerLink",t.DdM(10,F)),t.xp6(3),t.Q6J("routerLink",t.DdM(11,P)),t.xp6(6),t.Q6J("routerLink",t.DdM(12,D)))},dependencies:[m.rH,p.O5]})}return n})(),L=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-chithome"]],decls:5,vars:0,consts:[[1,"w-screen","h-screen","px-5","py-2","flex","space-x-4","overflow-hidden"],[1,"w-1/5"],[1,"w-full","h-full","flex","flex-col","gap-2"],[1,"w-full","h-20"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-sidebar",1),t.TgZ(2,"div",2),t._UZ(3,"app-navbar",3)(4,"router-outlet"),t.qZA()())},dependencies:[m.lC,N,Y]})}return n})();var b=h(8782);function $(n,r){1&n&&t._UZ(0,"app-spinner")}let R=(()=>{class n{constructor(e,i){this.apicall=e,this.router=i,this.isLoading=!1}cofirmEmail(){this.isLoading=!0,this.apicall.confirmEmail().subscribe({next:e=>{this.isLoading=!1,e.success&&this.router.navigate(["/user/email-otp"])},error:e=>{console.log("cant send otp to mail")}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-cofirm-email"]],decls:7,vars:1,consts:[[1,"w-full","h-[600px]","shadow-xl","shadow-slate-500","bg-[#dfdfdf]","rounded-lg","flex","items-center","justify-center"],[1,"w-3/5","h-1/3","border-2","border-[#715aa7]","shadow-md","shadow-slate-500","flex","items-center","justify-center","flex-col","gap-5"],[1,"text-lg"],[1,"bg-[#6534d9]","p-3","rounded-xl",3,"click"],[4,"ngIf"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p",2),t._uU(3,"To be an owner to start chitty, you have to confirm your email."),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.cofirmEmail()}),t._uU(5,"Verify Now"),t.qZA(),t.YNc(6,$,1,0,"app-spinner",4),t.qZA()()),2&i&&(t.xp6(6),t.Q6J("ngIf",o.isLoading))},dependencies:[p.O5,b.O]})}return n})();var y=h(8645),E=h(305),A=h(5592),Q=h(7394);const I={now:()=>(I.delegate||Date).now(),delegate:void 0};class T extends y.x{constructor(r=1/0,e=1/0,i=I){super(),this._bufferSize=r,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,e)}next(r){const{isStopped:e,_buffer:i,_infiniteTimeWindow:o,_timestampProvider:s,_windowTime:a}=this;e||(i.push(r),!o&&i.push(s.now()+a)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(r),{_infiniteTimeWindow:i,_buffer:o}=this,s=o.slice();for(let a=0;a<s.length&&!r.closed;a+=i?1:2)r.next(s[a]);return this._checkFinalizedStatuses(r),e}_trimBuffer(){const{_bufferSize:r,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:o}=this,s=(o?1:2)*r;if(r<1/0&&s<i.length&&i.splice(0,i.length-s),!o){const a=e.now();let l=0;for(let d=1;d<i.length&&i[d]<=a;d+=2)l=d;l&&i.splice(0,l+1)}}}const W={url:"",deserializer:n=>JSON.parse(n.data),serializer:n=>JSON.stringify(n)};class w extends y.u{constructor(r,e){if(super(),this._socket=null,r instanceof A.y)this.destination=e,this.source=r;else{const i=this._config=Object.assign({},W);if(this._output=new y.x,"string"==typeof r)i.url=r;else for(const o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new T}}lift(r){const e=new w(this._config,this.destination);return e.operator=r,e.source=this,e}_resetState(){this._socket=null,this.source||(this.destination=new T),this._output=new y.x}multiplex(r,e,i){const o=this;return new A.y(s=>{try{o.next(r())}catch(l){s.error(l)}const a=o.subscribe({next:l=>{try{i(l)&&s.next(l)}catch(d){s.error(d)}},error:l=>s.error(l),complete:()=>s.complete()});return()=>{try{o.next(e())}catch(l){s.error(l)}a.unsubscribe()}})}_connectSocket(){const{WebSocketCtor:r,protocol:e,url:i,binaryType:o}=this._config,s=this._output;let a=null;try{a=e?new r(i,e):new r(i),this._socket=a,o&&(this._socket.binaryType=o)}catch(d){return void s.error(d)}const l=new Q.w0(()=>{this._socket=null,a&&1===a.readyState&&a.close()});a.onopen=d=>{const{_socket:g}=this;if(!g)return a.close(),void this._resetState();const{openObserver:v}=this._config;v&&v.next(d);const U=this.destination;this.destination=E.Lv.create(_=>{if(1===a.readyState)try{const{serializer:Z}=this._config;a.send(Z(_))}catch(Z){this.destination.error(Z)}},_=>{const{closingObserver:Z}=this._config;Z&&Z.next(void 0),_&&_.code?a.close(_.code,_.reason):s.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),this._resetState()},()=>{const{closingObserver:_}=this._config;_&&_.next(void 0),a.close(),this._resetState()}),U&&U instanceof T&&l.add(U.subscribe(this.destination))},a.onerror=d=>{this._resetState(),s.error(d)},a.onclose=d=>{a===this._socket&&this._resetState();const{closeObserver:g}=this._config;g&&g.next(d),d.wasClean?s.complete():s.error(d)},a.onmessage=d=>{try{const{deserializer:g}=this._config;s.next(g(d))}catch(g){s.error(g)}}}_subscribe(r){const{source:e}=this;return e?e.subscribe(r):(this._socket||this._connectSocket(),this._output.subscribe(r),r.add(()=>{const{_socket:i}=this;0===this._output.observers.length&&(i&&(1===i.readyState||0===i.readyState)&&i.close(),this._resetState())}),r)}unsubscribe(){const{_socket:r}=this;r&&(1===r.readyState||0===r.readyState)&&r.close(),this._resetState(),super.unsubscribe()}}let K=(()=>{class n{constructor(){this.messagesSubject=new y.x}connect(){this.webSocketSubject=function H(n){return new w(n)}("ws://localhost:8080"),this.webSocketSubject.subscribe(e=>this.messagesSubject.next(e),e=>console.error("WebSocket error:",e))}listen(){return this.messagesSubject.asObservable()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z(n,r){if(1&n&&(t.TgZ(0,"div",5)(1,"p"),t._uU(2),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.AsE(" Your chit ",e.chitName," Lotting Date id ",e.lotDate," of each Month ")}}function B(n,r){1&n&&(t.TgZ(0,"div",6)(1,"div",7)(2,"span",8),t._uU(3,"Loading..."),t.qZA()()())}function X(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"h2",11),t._uU(2,"User Details"),t.qZA(),t.TgZ(3,"p")(4,"strong"),t._uU(5,"Name:"),t.qZA(),t._uU(6),t.qZA(),t.TgZ(7,"p")(8,"strong"),t._uU(9,"Email:"),t.qZA(),t._uU(10),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(6),t.hij(" ",e.selectedUser.firstName,""),t.xp6(4),t.hij(" ",e.selectedUser.email,"")}}function V(n,r){if(1&n&&t.YNc(0,X,11,2,"div",9),2&n){const e=t.oxw();t.Q6J("ngIf",e.selectedUser)}}let tt=(()=>{class n{constructor(e,i){this.apiservice=e,this.webSocketService=i,this.loading=!1,this.isToday=!1}ngOnInit(){this.fetchData(),this.webSocketService.connect(),this.webSocketService.listen().subscribe(e=>{this.loading=!0,this.selectedUser=e,this.loading=!1})}fetchData(){this.apiservice.JoinedChits().subscribe({next:e=>{this.list=e,console.log(this.list)}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(K))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-initial"]],decls:6,vars:3,consts:[["class","w-1/2 shadow-lg shadow-black p-10",4,"ngFor","ngForOf"],["href",""],[1,"flex","justify-center","items-center","h-screen"],["class","flex items-center",4,"ngIf","ngIfElse"],["content",""],[1,"w-1/2","shadow-lg","shadow-black","p-10"],[1,"flex","items-center"],["role","status",1,"spinner-border","text-blue-500","mr-2"],[1,""],["class","user-details",4,"ngIf"],[1,"user-details"],[1,"text-2xl","font-bold","mb-4"]],template:function(i,o){if(1&i&&(t.YNc(0,z,3,2,"div",0),t._UZ(1,"a",1),t.TgZ(2,"div",2),t.YNc(3,B,4,0,"div",3),t.YNc(4,V,1,1,"ng-template",null,4,t.W1O),t.qZA()),2&i){const s=t.MAs(5);t.Q6J("ngForOf",o.list),t.xp6(3),t.Q6J("ngIf",o.loading)("ngIfElse",s)}},dependencies:[p.sg,p.O5],styles:["circle[_ngcontent-%COMP%]{transition:transform .5s ease-in-out}"]})}return n})();var c=h(95);const et=["otp1"],it=["otp2"],nt=["otp3"],ot=["otp4"],st=["otp5"],rt=["otp6"];function at(n,r){1&n&&t._UZ(0,"app-spinner")}function ct(n,r){1&n&&(t.TgZ(0,"p",22),t._uU(1,"Incorrect OTP"),t.qZA())}let lt=(()=>{class n{constructor(e,i){this.apiCall=e,this.router=i,this.isLoading=!1}moveToNext(e){e&&0===e.value.length&&e.focus()}onSubmit(e){this.isLoading=!0;const{otp1val:i,otp2val:o,otp3val:s,otp4val:a,otp5val:l,otp6val:d}=e.value;this.data={otp:i+o+s+a+l+d},console.log("data for otp verification",this.data),this.apiCall.verifyEmailOtp(this.data).subscribe(v=>{this.isLoading=!1,console.log("response from otp",v),v.error?this.otperror=!0:(this.otperror=!1,this.router.navigate(["/user/home"]))})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-email-otp"]],viewQuery:function(i,o){if(1&i&&(t.Gf(et,5),t.Gf(it,5),t.Gf(nt,5),t.Gf(ot,5),t.Gf(st,5),t.Gf(rt,5)),2&i){let s;t.iGM(s=t.CRH())&&(o.otp1=s.first),t.iGM(s=t.CRH())&&(o.otp2=s.first),t.iGM(s=t.CRH())&&(o.otp3=s.first),t.iGM(s=t.CRH())&&(o.otp4=s.first),t.iGM(s=t.CRH())&&(o.otp5=s.first),t.iGM(s=t.CRH())&&(o.otp6=s.first)}},decls:25,vars:2,consts:[[1,"flex","justify-center","items-center","h-screen"],[1,"bg-blue-950","p-6","rounded-lg","shadow-md","flex","items-center","justify-center","flex-col"],[1,"text-white","p-2"],[1,"text-2xl","font-semibold","mb-4","text-blue-200"],[1,"flex","flex-col","items-center","justify-center",3,"ngSubmit"],["Form","ngForm"],[1,"flex","items-center","justify-center","mb-4"],["type","text","ngModel","","name","otp1val","maxlength","1",1,"border","border-gray-300","rounded-md","px-4","py-2","mr-2","w-12","text-center",3,"input"],["otp1",""],["type","text","ngModel","","name","otp2val","maxlength","1",1,"border","border-gray-300","rounded-md","px-4","py-2","mr-2","w-12","text-center",3,"input"],["otp2",""],["type","text","ngModel","","name","otp3val","maxlength","1",1,"border","border-gray-300","rounded-md","px-4","py-2","mr-2","w-12","text-center",3,"input"],["otp3",""],["type","text","ngModel","","name","otp4val","maxlength","1",1,"border","border-gray-300","rounded-md","px-4","py-2","mr-2","w-12","text-center",3,"input"],["otp4",""],["type","text","ngModel","","name","otp5val","maxlength","1",1,"border","border-gray-300","rounded-md","px-4","py-2","mr-2","w-12","text-center",3,"input"],["otp5",""],["type","text","ngModel","","name","otp6val","maxlength","1",1,"border","border-gray-300","rounded-md","px-4","py-2","w-12","text-center"],["otp6",""],["type","submit",1,"bg-blue-500","hover:bg-blue-600","text-white","font-semibold","py-2","px-4","rounded"],[4,"ngIf"],["class","text-white",4,"ngIf"],[1,"text-white"]],template:function(i,o){if(1&i){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"p",2),t._uU(3,"One time password sent to your registered email"),t.qZA(),t.TgZ(4,"h2",3),t._uU(5,"Enter OTP"),t.qZA(),t.TgZ(6,"form",4,5),t.NdJ("ngSubmit",function(){t.CHM(s);const l=t.MAs(7);return t.KtG(o.onSubmit(l))}),t.TgZ(8,"div",6)(9,"input",7,8),t.NdJ("input",function(){t.CHM(s);const l=t.MAs(12);return t.KtG(o.moveToNext(l))}),t.qZA(),t.TgZ(11,"input",9,10),t.NdJ("input",function(){t.CHM(s);const l=t.MAs(14);return t.KtG(o.moveToNext(l))}),t.qZA(),t.TgZ(13,"input",11,12),t.NdJ("input",function(){t.CHM(s);const l=t.MAs(16);return t.KtG(o.moveToNext(l))}),t.qZA(),t.TgZ(15,"input",13,14),t.NdJ("input",function(){t.CHM(s);const l=t.MAs(18);return t.KtG(o.moveToNext(l))}),t.qZA(),t.TgZ(17,"input",15,16),t.NdJ("input",function(){t.CHM(s);const l=t.MAs(20);return t.KtG(o.moveToNext(l))}),t.qZA(),t._UZ(19,"input",17,18),t.qZA(),t.TgZ(21,"button",19),t._uU(22," Submit "),t.qZA(),t.YNc(23,at,1,0,"app-spinner",20),t.qZA(),t.YNc(24,ct,2,0,"p",21),t.qZA()()}2&i&&(t.xp6(23),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.otperror))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.nD,c.On,c.F,p.O5,b.O]})}return n})();var C=h(5619);let x=(()=>{class n{constructor(){this.Request=new C.X(null),this.Requested$=this.Request.asObservable(),this.chit=new C.X(null),this.chitId$=this.chit.asObservable(),this.chitId=new C.X(null),this.chitIdToFetchPayment$=this.chitId.asObservable()}setData1(e){this.Request.next(e)}setData2(e){this.chit.next(e)}setData3(e){this.chitId.next(e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();function ut(n,r){1&n&&t._UZ(0,"app-spinner")}function pt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"h1",3),t._uU(2,"Fill the Following"),t.qZA(),t.TgZ(3,"form",4,5),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.MAs(4),s=t.oxw();return t.KtG(s.submitForm(o))}),t.TgZ(5,"div",6)(6,"label",7),t._uU(7,"Street Address"),t.qZA(),t._UZ(8,"input",8),t.TgZ(9,"label",9),t._uU(10,"City"),t.qZA(),t._UZ(11,"input",10),t.TgZ(12,"label",11),t._uU(13,"State"),t.qZA(),t._UZ(14,"input",12),t.TgZ(15,"label",13),t._uU(16,"PIN Code"),t.qZA(),t._UZ(17,"input",14),t.TgZ(18,"label",15),t._uU(19,"Country"),t.qZA(),t._UZ(20,"input",16),t.TgZ(21,"button",17),t._uU(22,"Submit"),t.qZA(),t.YNc(23,ut,1,0,"app-spinner",18),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(23),t.Q6J("ngIf",e.isLoading)}}function dt(n,r){1&n&&(t.TgZ(0,"div",19)(1,"p"),t._uU(2,"Request Submitted"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Wait for Admin's Approval"),t.qZA()())}function ht(n,r){1&n&&(t.TgZ(0,"div",19)(1,"p"),t._uU(2,"Hooray"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Your Request For Chit Ownership has been Approved."),t.qZA(),t.TgZ(5,"p"),t._uU(6,"You can now start your own Chit."),t.qZA()())}let mt=(()=>{class n{constructor(e,i){this.apicall=e,this.dataService=i,this.submitted=!1,this.isLoading=!1}ngOnInit(){this.apicall.RequestSubmittedorNot().subscribe({next:e=>this.submitted=e.accepted,error:e=>console.log(e)}),this.apicall.isOwner().subscribe({next:e=>{this.owner=e.owner,console.log(e)},error:e=>console.log(e)})}submitForm(e){this.isLoading=!0,this.owner=!1,this.submitted=!0,this.apicall.applyForOwnerPosition(e.value).subscribe({next:i=>{this.isLoading=!1,this.dataService.setData1(!!i.requestSaved)},error:i=>{this.dataService.setData1(!1)}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(x))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-be-an-owner"]],decls:3,vars:3,consts:[["class","w-full flex items-center justify-center flex-col ",4,"ngIf"],["class","w-full h-full shadow-lg shadow-black p-10 flex items-center justify-center flex-col",4,"ngIf"],[1,"w-full","flex","items-center","justify-center","flex-col"],[1,"text-2xl","text-blue-950","font-bold"],[1,"w-full","flex","items-center","justify-center",3,"ngSubmit"],["addressForm","ngForm"],[1,"w-3/4","border-[2px]","border-black","flex","flex-col","p-10","justify-center"],["for","street"],["type","text","id","street","name","street","ngModel","","required","",1,"p-3","border-[2px]","border-black","rounded-md"],["for","city"],["type","text","id","city","name","city","ngModel","","required","",1,"p-3","border-[2px]","border-black","rounded-md"],["for","state"],["type","text","id","state","name","state","ngModel","","required","",1,"p-3","border-[2px]","border-black","rounded-md"],["for","zip"],["type","text","id","zip","name","pin","ngModel","","required","",1,"p-3","border-[2px]","border-black","rounded-md"],["for","country"],["type","text","id","country","name","country","ngModel","","required","",1,"p-3","border-[2px]","border-black","rounded-md"],["type","submit",1,"p-3","bg-purple-800","w-1/4","mt-2","rounded-md","mx-auto"],[4,"ngIf"],[1,"w-full","h-full","shadow-lg","shadow-black","p-10","flex","items-center","justify-center","flex-col"]],template:function(i,o){1&i&&(t.YNc(0,pt,24,1,"div",0),t.YNc(1,dt,5,0,"div",1),t.YNc(2,ht,7,0,"div",1)),2&i&&(t.Q6J("ngIf",!o.submitted&&!o.owner),t.xp6(1),t.Q6J("ngIf",!o.owner&&o.submitted),t.xp6(1),t.Q6J("ngIf",o.owner))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.On,c.F,p.O5,b.O]})}return n})();function ft(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"h2",3),t._uU(2,"Start a Chitty"),t.qZA(),t.TgZ(3,"form",4,5),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.MAs(4),s=t.oxw();return t.KtG(s.onsubmit(o))}),t.TgZ(5,"div",6)(6,"div")(7,"label",7),t._uU(8,"Chit Name:"),t.qZA(),t._UZ(9,"input",8),t.qZA(),t.TgZ(10,"div")(11,"label",9),t._uU(12,"Duration (in months):"),t.qZA(),t._UZ(13,"input",10),t.qZA(),t.TgZ(14,"div")(15,"label",11),t._uU(16,"Total Amount:"),t.qZA(),t._UZ(17,"input",12),t.qZA(),t.TgZ(18,"div")(19,"label",13),t._uU(20,"Monthly Payment:"),t.qZA(),t._UZ(21,"input",14),t.qZA(),t.TgZ(22,"div")(23,"label",15),t._uU(24,"Number of Participants:"),t.qZA(),t._UZ(25,"input",16),t.qZA(),t.TgZ(26,"div")(27,"label"),t._uU(28,"Chit Type:"),t.qZA(),t.TgZ(29,"div",17),t._UZ(30,"input",18),t.TgZ(31,"label",19),t._uU(32,"Public"),t.qZA()(),t.TgZ(33,"div",17),t._UZ(34,"input",20),t.TgZ(35,"label",21),t._uU(36,"Private"),t.qZA()()(),t.TgZ(37,"div")(38,"label",22),t._uU(39,"Starting Date:"),t.qZA(),t._UZ(40,"input",23),t.qZA(),t.TgZ(41,"div")(42,"label",24),t._uU(43,"Lot Date:"),t.qZA(),t._UZ(44,"input",25),t.qZA(),t.TgZ(45,"div")(46,"label",26),t._uU(47,"Starting Month"),t.qZA(),t._UZ(48,"input",27),t.qZA()(),t.TgZ(49,"div",28)(50,"button",29),t._uU(51),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(50),t.Tol(e.buttonClass),t.xp6(1),t.Oqu(e.buttonText)}}function gt(n,r){1&n&&(t.TgZ(0,"div",30),t._uU(1,"You dont have permission to start a chit. If you want to start a new chit first you have to submit a request to the admin and come back later!"),t.qZA())}let _t=(()=>{class n{constructor(e){this.apiService=e,this.buttonText="Submit",this.buttonClass=""}ngOnInit(){this.apiService.isOwner().subscribe({next:e=>{this.owner=e.owner,console.log(e)},error:e=>console.log(e)})}onsubmit(e){this.apiService.RegisterChit(e.value).subscribe({next:i=>{i.submitted?(this.buttonText="Submitted",this.buttonClass="bg-green-500"):(this.buttonText="Submission Failed",this.buttonClass="bg-red-500")},error:i=>{this.buttonText="Submission Failed",this.buttonClass="bg-red-500"}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-start-chitty"]],decls:2,vars:2,consts:[["class","container mx-auto p-4 flex items-center justify-center flex-col shadow-lg shadow-slate-500",4,"ngIf"],["class","w-full p-20 shadow-lg shadow-slate-600",4,"ngIf"],[1,"container","mx-auto","p-4","flex","items-center","justify-center","flex-col","shadow-lg","shadow-slate-500"],[1,"text-2xl","font-semibold","mb-4"],[1,"max-w-md","w-full",3,"ngSubmit"],["chittyForm","ngForm"],[1,"grid","grid-cols-2","gap-4","mb-4"],["for","chitName",1,"block","text-gray-700"],["type","text","id","chitName","name","chitName","ngModel","","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","duration",1,"block","text-gray-700"],["type","number","id","duration","name","duration","ngModel","","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","totalAmount",1,"block","text-gray-700"],["type","number","id","totalAmount","name","totalAmount","ngModel","","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","monthlyPayment",1,"block","text-gray-700"],["type","number","id","monthlyPayment","name","monthlyPayment","ngModel","","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","participants",1,"block","text-gray-700"],["type","number","id","participants","name","participants","ngModel","","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],[1,"mt-1"],["type","radio","id","public","name","chitType","value","public","ngModel","","required","",1,"h-4","w-4","text-indigo-600","border-gray-300"],["for","public",1,"ml-2","text-gray-700"],["type","radio","id","private","name","chitType","value","private","ngModel","","required","",1,"h-4","w-4","text-indigo-600","border-gray-300"],["for","private",1,"ml-2","text-gray-700"],["for","startDate",1,"block","text-gray-700"],["type","date","id","startDate","name","startDate","ngModel","","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","lotDate",1,"block","text-gray-700"],["type","number","id","lotDate","name","lotDate","ngModel","","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","StartingMonth",1,"block","text-gray-700"],["type","month","id","StartingMonth","name","StartingMonth","ngModel","","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],[1,"mt-6"],["type","submit",1,"w-full","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500"],[1,"w-full","p-20","shadow-lg","shadow-slate-600"]],template:function(i,o){1&i&&(t.YNc(0,ft,52,3,"div",0),t.YNc(1,gt,2,0,"div",1)),2&i&&(t.Q6J("ngIf",o.owner),t.xp6(1),t.Q6J("ngIf",!o.owner))},dependencies:[c._Y,c.Fj,c.wV,c._,c.JJ,c.JL,c.Q7,c.On,c.F,p.O5]})}return n})();function bt(n,r){1&n&&(t.TgZ(0,"p"),t._uU(1,"Cant Delete Chit"),t.qZA())}const xt=function(){return["/user/home/list-users"]},Zt=function(){return["/user/home/addusers"]};function yt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",10),t._uU(2),t.qZA(),t.TgZ(3,"td",11)(4,"p",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.ShowChit(s._id))}),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.qZA(),t.TgZ(16,"p"),t._uU(17),t.qZA(),t.TgZ(18,"p"),t._uU(19),t.qZA()(),t.TgZ(20,"td")(21,"div",13)(22,"a",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.clicked(s.requests,s._id))}),t._uU(23,"Requests"),t.qZA(),t.TgZ(24,"div",15),t._uU(25),t.qZA()(),t.TgZ(26,"a",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.addusers(s._id))}),t._uU(27,"Add User"),t.qZA()(),t.TgZ(28,"td",10)(29,"button",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.updateChitty(s))}),t._uU(30," Update "),t.qZA(),t.TgZ(31,"button",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(3);return t.KtG(a.deleteChitty(s._id,s.startDate))}),t._uU(32," Delete "),t.qZA(),t.YNc(33,bt,2,0,"p",1),t.qZA()()}if(2&n){const e=r.$implicit,i=r.index,o=t.oxw(3);t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Q6J("routerLink",t.DdM(13,xt)),t.xp6(1),t.hij("Chit Name:",e.chitName,""),t.xp6(2),t.hij("Chit Duratuon:",e.duration,""),t.xp6(2),t.hij("Total Amount:",e.totalAmount,""),t.xp6(2),t.hij("Monthly Payment:",e.monthlyPayment,""),t.xp6(2),t.hij("No of Participants:",e.participants,""),t.xp6(2),t.hij("Chit Type:",e.chitType,""),t.xp6(2),t.hij("Start Date:",e.startDate,""),t.xp6(2),t.hij("Lot Date:",e.lotDate," of each month"),t.xp6(6),t.hij(" ",e.noOfRequest," "),t.xp6(1),t.Q6J("routerLink",t.DdM(14,Zt)),t.xp6(7),t.Q6J("ngIf",o.message)}}function vt(n,r){if(1&n&&(t.TgZ(0,"table",6)(1,"thead")(2,"tr"),t._UZ(3,"th",7),t.TgZ(4,"th",7),t._uU(5,"Chit Details"),t.qZA(),t.TgZ(6,"th",7),t._uU(7,"Requests"),t.qZA(),t.TgZ(8,"th",7),t._uU(9,"Actions"),t.qZA()()(),t.TgZ(10,"tbody"),t.YNc(11,yt,34,15,"tr",8),t._UZ(12,"tr",9),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(11),t.Q6J("ngForOf",e.chitties)}}function Tt(n,r){if(1&n&&(t.TgZ(0,"div",3)(1,"h2",4),t._uU(2,"Chitties"),t.qZA(),t.YNc(3,vt,13,1,"table",5),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!e.requestClicked)}}function wt(n,r){1&n&&(t.TgZ(0,"p"),t._uU(1,"Failed to submit.Provide Valid Details"),t.qZA())}function Ct(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",19)(2,"h2",4),t._uU(3,"Update Chitty"),t.qZA(),t.TgZ(4,"form",20),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onsubmit())}),t.TgZ(5,"div",21)(6,"div")(7,"label",22),t._uU(8,"Chit Name:"),t.qZA(),t._UZ(9,"input",23),t.qZA(),t.TgZ(10,"div")(11,"label",24),t._uU(12,"Duration (in months):"),t.qZA(),t._UZ(13,"input",25),t.qZA(),t.TgZ(14,"div")(15,"label",26),t._uU(16,"Total Amount:"),t.qZA(),t._UZ(17,"input",27),t.qZA(),t.TgZ(18,"div")(19,"label",28),t._uU(20,"Monthly Payment:"),t.qZA(),t._UZ(21,"input",29),t.qZA(),t.TgZ(22,"div")(23,"label",30),t._uU(24,"Number of Participants:"),t.qZA(),t._UZ(25,"input",31),t.qZA(),t.TgZ(26,"div")(27,"label"),t._uU(28,"Chit Type:"),t.qZA(),t.TgZ(29,"div",32),t._UZ(30,"input",33),t.TgZ(31,"label",34),t._uU(32,"Public"),t.qZA()(),t.TgZ(33,"div",32),t._UZ(34,"input",35),t.TgZ(35,"label",36),t._uU(36,"Private"),t.qZA()()(),t.TgZ(37,"div")(38,"label",37),t._uU(39,"Starting Date:"),t.qZA(),t._UZ(40,"input",38),t.qZA(),t.TgZ(41,"div")(42,"label",39),t._uU(43,"Lot Date:"),t.qZA(),t._UZ(44,"input",40),t.qZA(),t.TgZ(45,"div")(46,"label",41),t._uU(47,"Starting Month:"),t.qZA(),t._UZ(48,"input",42),t.qZA()(),t.TgZ(49,"div",43)(50,"button",44),t._uU(51),t.qZA()()(),t.YNc(52,wt,2,0,"p",1),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.chittyForm),t.xp6(5),t.s9C("value",null==e.chitToUpdate?null:e.chitToUpdate.chitName),t.xp6(4),t.s9C("value",null==e.chitToUpdate?null:e.chitToUpdate.duration),t.xp6(4),t.s9C("value",null==e.chitToUpdate?null:e.chitToUpdate.totalAmount),t.xp6(4),t.s9C("value",null==e.chitToUpdate?null:e.chitToUpdate.monthlyPayment),t.xp6(4),t.s9C("value",null==e.chitToUpdate?null:e.chitToUpdate.participants),t.xp6(15),t.s9C("value",null==e.chitToUpdate?null:e.chitToUpdate.startDate),t.xp6(4),t.s9C("value",null==e.chitToUpdate?null:e.chitToUpdate.lotDate),t.xp6(4),t.s9C("value",null==e.chitToUpdate?null:e.chitToUpdate.StartingMonth),t.xp6(3),t.hij(" ",e.buttonText," "),t.xp6(1),t.Q6J("ngIf",e.message)}}function Ut(n,r){if(1&n&&(t.TgZ(0,"div",51)(1,"p",52),t._uU(2),t.qZA(),t.TgZ(3,"p",52),t._uU(4),t.qZA(),t.TgZ(5,"p",52),t._uU(6),t.qZA(),t.TgZ(7,"p",52),t._uU(8),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij("First Name: ",e.details.firstName,""),t.xp6(2),t.hij("Last Name: ",e.details.lastName,""),t.xp6(2),t.hij("Email: ",e.details.email,""),t.xp6(2),t.hij("Phone: ",e.details.phone,"")}}function qt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",47)(1,"p",48),t._uU(2),t.qZA(),t.YNc(3,Ut,9,4,"div",49),t.TgZ(4,"div",45)(5,"button",50),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.accept(s.id.user,s.details.chitId))}),t._uU(6,"Accept"),t.qZA(),t.TgZ(7,"button",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.reject(s.id.user,s.details.chitId))}),t._uU(8,"Reject"),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.hij("User ID: ",e.id.user,""),t.xp6(1),t.Q6J("ngIf",e.details)}}function At(n,r){if(1&n&&(t.TgZ(0,"div",45),t.YNc(1,qt,9,2,"div",46),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.requests)}}let It=(()=>{class n{constructor(e,i,o){this.apiservice=e,this.fb=i,this.dataservice=o,this.chitties=[],this.update=!1,this.chitToUpdate=null,this.message=!1,this.noOfRequest=0,this.requestClicked=!1,this.requests=[],this.buttonText="Update"}ngOnInit(){this.refreshData()}updateChitty(e){this.update=!0,this.chitToUpdate=e,this.chittyForm=this.fb.group({_id:[this.chitToUpdate?._id,c.kI.required],chitName:[this.chitToUpdate?.chitName,c.kI.required],duration:[this.chitToUpdate?.duration,c.kI.required],totalAmount:[this.chitToUpdate?.totalAmount,c.kI.required],monthlyPayment:[this.chitToUpdate?.monthlyPayment,c.kI.required],participants:[this.chitToUpdate?.participants,c.kI.required],chitType:[this.chitToUpdate?.chitType,c.kI.required],startDate:[this.chitToUpdate?.startDate,c.kI.required],lotDate:[this.chitToUpdate?.lotDate,c.kI.required],StartingMonth:[this.chitToUpdate?.StartingMonth,c.kI.required]})}onsubmit(){this.chittyForm.valid?(console.log(this.chittyForm.value),this.apiservice.UpdateChitty(this.chittyForm.value).subscribe({next:e=>{this.update=!1,this.refreshData()},error:e=>this.message=!0})):this.message=!0}deleteChitty(e,i){new Date>=new Date(i)?this.message=!0:this.apiservice.DeleteChitty(e).subscribe({next:s=>this.refreshData(),error:s=>this.message=!0})}refreshData(){this.apiservice.OwnedChitties().subscribe({next:e=>{e.forEach(i=>{this.apiservice.getRequest(i._id).subscribe({next:o=>{const s=o.filter(a=>"pending"===a.status);i.requests=s,console.log(i.requests),i.noOfRequest=i.requests.length},error:o=>{this.noOfRequest=0}})}),this.chitties=e,console.log(this.chitties)},error:e=>{this.chitties=[]}})}clicked(e,i){console.log(e),this.requestClicked=!0,this.requests=e.map(o=>({id:o})),this.requests.forEach(o=>{console.log(o.id.user),this.apiservice.getUser(o.id.user).subscribe(s=>{o.details={...s,chitId:i}}),console.log(this.requests)}),console.log(this.requests)}accept(e,i){const o={id:e,chitId:i};console.log("data",o),this.apiservice.AcceptRequest(o).subscribe(),this.refreshData()}reject(e,i){const o={id:e,chitId:i};console.log("data",o),this.apiservice.RejectRequest(o).subscribe({next:s=>console.log(s),error:s=>console.log(s)}),this.refreshData()}ShowChit(e){this.dataservice.setData2(e)}addusers(e){this.dataservice.setData2(e)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(c.qu),t.Y36(x))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-owned-chitties"]],decls:3,vars:3,consts:[["class","w-full mx-auto flex items-center flex-col justify-center",4,"ngIf"],[4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"w-full","mx-auto","flex","items-center","flex-col","justify-center"],[1,"text-2xl","font-semibold","mb-4"],["class","w-3/4",4,"ngIf"],[1,"w-3/4"],[1,"border","px-4","py-2"],[4,"ngFor","ngForOf"],[1,"absolute"],[1,"border","px-4","py-2","text-center"],[1,"border","px-4","py-2","text-left","text-base","text-blue-700"],[1,"underline","cursor-pointer",3,"routerLink","click"],[1,"flex","items-center","gap-1","cursor-pointer","text-blue-600","underline"],[3,"click"],[1,"w-5","h-5","bg-red-700","rounded-full","text-white","flex","items-center","justify-center","cursor-pointer"],[1,"text-blue-600","underline",3,"routerLink","click"],[1,"mr-2","px-4","py-2","bg-blue-500","text-white","rounded-md","hover:bg-blue-600","focus:outline-none","focus:bg-blue-600",3,"click"],[1,"px-4","py-2","bg-red-500","text-white","rounded-md","hover:bg-red-600","focus:outline-none","focus:bg-red-600",3,"click"],[1,"container","mx-auto","p-4","flex","items-center","justify-center","flex-col","shadow-lg","shadow-slate-500"],[1,"max-w-md","w-full",3,"formGroup","ngSubmit"],[1,"grid","grid-cols-2","gap-4","mb-4"],["for","chitName",1,"block","text-gray-700"],["type","text","id","chitName","formControlName","chitName","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"value"],["for","duration",1,"block","text-gray-700"],["type","number","id","duration","formControlName","duration","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"value"],["for","totalAmount",1,"block","text-gray-700"],["type","number","id","totalAmount","formControlName","totalAmount","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"value"],["for","monthlyPayment",1,"block","text-gray-700"],["type","number","id","monthlyPayment","formControlName","monthlyPayment","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"value"],["for","participants",1,"block","text-gray-700"],["type","number","id","participants","formControlName","participants","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-lg","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"value"],[1,"mt-1"],["type","radio","id","public","formControlName","chitType","value","public","required","",1,"h-4","w-4","text-indigo-600","border-gray-300"],["for","public",1,"ml-2","text-gray-700"],["type","radio","id","private","formControlName","chitType","value","private","required","",1,"h-4","w-4","text-indigo-600","border-gray-300"],["for","private",1,"ml-2","text-gray-700"],["for","startDate",1,"block","text-gray-700"],["type","date","id","startDate","formControlName","startDate","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"value"],["for","lotDate",1,"block","text-gray-700"],["type","number","id","lotDate","formControlName","lotDate","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"value"],["for","StartingMonth",1,"block","text-gray-700"],["type","month","id","StartingMonth","formControlName","StartingMonth","required","",1,"mt-1","block","w-full","h-12","border-gray-300","rounded-md","shadow-sm","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"value"],[1,"mt-6"],["type","submit",1,"w-full","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500"],[1,"mt-4"],["class","border border-gray-200 p-4 rounded-lg mb-4",4,"ngFor","ngForOf"],[1,"border","border-gray-200","p-4","rounded-lg","mb-4"],[1,"text-lg","font-semibold"],["class","mt-2",4,"ngIf"],[1,"px-4","py-2","bg-green-500","text-white","rounded-md","hover:bg-green-600","focus:outline-none","focus:bg-green-600","mr-2",3,"click"],[1,"mt-2"],[1,"text-gray-700"]],template:function(i,o){1&i&&(t.YNc(0,Tt,4,1,"div",0),t.YNc(1,Ct,53,11,"div",1),t.YNc(2,At,2,1,"div",2)),2&i&&(t.Q6J("ngIf",!o.update),t.xp6(1),t.Q6J("ngIf",o.update),t.xp6(1),t.Q6J("ngIf",o.requestClicked))},dependencies:[m.rH,c._Y,c.Fj,c.wV,c._,c.JJ,c.JL,c.Q7,c.sg,c.u,p.sg,p.O5]})}return n})();function kt(n,r){1&n&&t._UZ(0,"app-spinner")}const Ot=function(n,r,e){return{"bg-blue-500":n,"bg-yellow-500":r,"bg-gray-500":e}};function Nt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",7),t._uU(2),t.qZA(),t.TgZ(3,"td",7),t._uU(4),t._UZ(5,"br"),t._uU(6),t._UZ(7,"br"),t._uU(8),t._UZ(9,"br"),t._uU(10),t.qZA(),t.TgZ(11,"td",7),t._uU(12),t.qZA(),t.TgZ(13,"td",7)(14,"button",8),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.submit(s._id))}),t._uU(15),t.qZA(),t.YNc(16,kt,1,0,"app-spinner",9),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.chitName),t.xp6(2),t.hij(" Duration:",e.duration," "),t.xp6(2),t.hij(" Monthly Payment:",e.monthlyPayment," "),t.xp6(2),t.hij(" No of Participants:",e.participants," "),t.xp6(2),t.hij(" Starting Date:",e.startDate," "),t.xp6(2),t.Oqu(e.totalAmount),t.xp6(2),t.Q6J("ngClass",t.kEZ(10,Ot,e.isParticipant,e.isRequested,!(e.isParticipant||e.isRequested)))("disabled",e.isParticipant||e.isRequested),t.xp6(1),t.hij(" ",e.isParticipant?"Joined":e.isRequested&&"rejected"===e.status?"Rejected":e.isRequested?"Requested":"Join"," "),t.xp6(1),t.Q6J("ngIf",i.isLoading)}}let St=(()=>{class n{constructor(e){this.apiService=e,this.chitties=[],this.buttonText="Request to Join",this.isLoading=!1}ngOnInit(){this.fetchData()}fetchData(){this.apiService.OpenChitties().subscribe(e=>{console.log(e),e.forEach(i=>{this.apiService.IsAMember(i._id).subscribe(o=>{i.isParticipant=o.participant}),this.apiService.IsRequested(i._id).subscribe(o=>{i.isRequested=o.request,i.status=o.data[0]?.requestedUsers[0]?.status,console.log(i.status)})}),this.chitties=e,console.log(e)})}submit(e){this.isLoading=!0,this.apiService.SubmitRequest({id:e}).subscribe(o=>this.fetchData()),this.isLoading=!1}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-open-chitties"]],decls:16,vars:1,consts:[[1,"container","mx-auto"],[1,"text-2xl","font-semibold","mb-4"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap"],[1,"px-4","py-2","bg-blue-500","text-white","rounded-md","hover:bg-blue-600","focus:outline-none","focus:bg-blue-600",3,"ngClass","disabled","click"],[4,"ngIf"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"List of Chitties"),t.qZA(),t.TgZ(3,"table",2)(4,"thead",3)(5,"tr")(6,"th",4),t._uU(7," Chit Name "),t.qZA(),t.TgZ(8,"th",4),t._uU(9," Details "),t.qZA(),t.TgZ(10,"th",4),t._uU(11," Total Amount "),t.qZA(),t.TgZ(12,"th",4),t._uU(13," Action "),t.qZA()()(),t.TgZ(14,"tbody",5),t.YNc(15,Nt,17,14,"tr",6),t.qZA()()()),2&i&&(t.xp6(15),t.Q6J("ngForOf",o.chitties))},dependencies:[p.mk,p.sg,p.O5,b.O]})}return n})();function jt(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"p",11),t._uU(2),t.qZA(),t.TgZ(3,"p",11),t._uU(4),t.qZA(),t.TgZ(5,"p",11),t._uU(6),t.qZA(),t.TgZ(7,"p",11),t._uU(8),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.hij("First Name: ",e.user.firstName,""),t.xp6(2),t.hij("Last Name: ",e.user.lastName,""),t.xp6(2),t.hij("Email: ",e.user.email,""),t.xp6(2),t.hij("Phone: ",e.user.phone,"")}}function Mt(n,r){1&n&&t._UZ(0,"app-spinner")}function Jt(n,r){1&n&&(t.TgZ(0,"p"),t._uU(1,"Cant remove User"),t.qZA())}const Ft=function(){return["/chat"]},Pt=function(n,r){return{userType:"owner",userId:n,chitId:r}};function Dt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",3)(1,"div",4)(2,"a",5),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.getUser(s))}),t._uU(3),t.qZA(),t.YNc(4,jt,9,4,"div",6),t.TgZ(5,"button",7),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.remove(s))}),t._uU(6,"Remove"),t.qZA(),t.TgZ(7,"button",8),t._uU(8,"Open Chat"),t.qZA(),t.YNc(9,Mt,1,0,"app-spinner",9),t.YNc(10,Jt,2,0,"p",9),t.qZA()()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(3),t.hij(" User ID: ",e," "),t.xp6(1),t.Q6J("ngIf",i.user&&i.selecteduserId===e),t.xp6(3),t.Q6J("routerLink",t.DdM(6,Ft))("queryParams",t.WLB(7,Pt,e,i.chitId)),t.xp6(2),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",i.deleted)}}let Yt=(()=>{class n{constructor(e,i){this.apiservice=e,this.dataservice=i,this.userlist=[],this.deleted=!1,this.isLoading=!1}ngOnInit(){this.refresh()}refresh(){this.dataservice.chitId$.subscribe(e=>this.chitId=e),console.log(this.chitId),this.apiservice.getParticipants(this.chitId).subscribe(e=>{this.userlist=e?.result,console.log(e)}),console.log(this.userlist)}getUser(e){this.selecteduserId=e,this.apiservice.getUser(e).subscribe({next:i=>{this.user=i,console.log(this.user)}})}remove(e){this.isLoading=!0,this.apiservice.removeUser({userId:e,chitId:this.chitId}).subscribe({next:o=>{this.isLoading=!1,o.delete?(this.deleted=!0,this.refresh()):this.deleted=!1},error:o=>{this.deleted=!1}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(x))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-users"]],decls:5,vars:1,consts:[[1,"mt-4"],[1,"divide-y","divide-gray-200"],["class","py-4 flex justify-between items-center",4,"ngFor","ngForOf"],[1,"py-4","flex","justify-between","items-center"],[1,"flex","items-center","gap-16"],[1,"text-blue-500","underline","cursor-pointer",3,"click"],["class","mt-2",4,"ngIf"],[1,"p-2","bg-purple-500","rounded-lg",3,"click"],[1,"p-2","bg-purple-500","rounded-lg",3,"routerLink","queryParams"],[4,"ngIf"],[1,"mt-2"],[1,"text-gray-700"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"List Of Users"),t.qZA(),t.TgZ(3,"ul",1),t.YNc(4,Dt,11,10,"li",2),t.qZA()()),2&i&&(t.xp6(4),t.Q6J("ngForOf",o.userlist))},dependencies:[m.rH,p.sg,p.O5,b.O]})}return n})();function Lt(n,r){1&n&&t._UZ(0,"app-spinner")}function $t(n,r){if(1&n&&(t.TgZ(0,"p",11),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.message)}}function Rt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",4)(1,"div",5)(2,"p",6),t._uU(3),t.qZA(),t.TgZ(4,"p",7),t._uU(5),t.qZA(),t.TgZ(6,"p",7),t._uU(7),t.qZA(),t.TgZ(8,"p",7),t._uU(9),t.qZA(),t.TgZ(10,"p",7),t._uU(11),t.qZA()(),t.TgZ(12,"button",8),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.add(s.user._id))}),t._uU(13," Add "),t.qZA(),t.YNc(14,Lt,1,0,"app-spinner",9),t.YNc(15,$t,2,1,"p",10),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(3),t.hij("User ID: ",e.user._id,""),t.xp6(2),t.hij("First Name: ",e.user.firstName,""),t.xp6(2),t.hij("Last Name: ",e.user.lastName,""),t.xp6(2),t.hij("Email: ",e.user.email,""),t.xp6(2),t.hij("Phone: ",e.user.phone,""),t.xp6(3),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",i.message)}}let Et=(()=>{class n{constructor(e,i){this.apiservice=e,this.dataservice=i,this.userlist=[],this.message=!1,this.messgaeText="",this.isLoading=!1}ngOnInit(){this.refresh()}refresh(){this.dataservice.chitId$.subscribe(e=>this.chitId=e),console.log(this.chitId),this.apiservice.getUsersToAdd(this.chitId).subscribe(e=>{this.userlist=e.map(i=>({user:i,message:""})),console.log(e,"poijhgfd",this.userlist)}),console.log(this.userlist)}add(e){this.isLoading=!0,this.apiservice.sendInvitation({chitId:this.chitId,invitedUserId:e}).subscribe({next:o=>{this.isLoading=!1,this.message=!0,console.log(o);const s=this.userlist.findIndex(a=>a.user._id===e);-1!==s&&(this.userlist[s].message=o.message),console.log(this.userlist)},error:o=>{this.message=!0;const s=this.userlist.findIndex(a=>a.user._id===e);-1!==s&&(this.userlist[s].message="Cannot add user")}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(x))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-users"]],decls:5,vars:1,consts:[[1,"mt-4"],[1,"text-lg","font-semibold","mb-2"],[1,"divide-y","divide-gray-200"],["class","py-4 flex justify-between items-center",4,"ngFor","ngForOf"],[1,"py-4","flex","justify-between","items-center"],[1,"flex","items-center","space-x-4"],[1,"text-gray-800"],[1,"text-gray-700"],[1,"px-4","py-2","bg-purple-500","text-white","rounded-lg","hover:bg-purple-600","focus:outline-none","focus:bg-purple-600",3,"click"],[4,"ngIf"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"List Of Users"),t.qZA(),t.TgZ(3,"ul",2),t.YNc(4,Rt,16,7,"li",3),t.qZA()()),2&i&&(t.xp6(4),t.Q6J("ngForOf",o.userlist))},dependencies:[p.sg,p.O5,b.O]})}return n})(),Qt=(()=>{class n{constructor(e,i){this.apiservice=e,this.router=i,this.formdata=new FormData}ngOnInit(){this.FMbuilder=new c.cw({firstName:new c.NI(null),lastName:new c.NI(null),file:new c.NI(null)})}onFileChange(e){const i=e.target.files;i.length>0&&this.formdata.append("file",i[0])}onSubmit(){if(this.FMbuilder.valid){const e=this.FMbuilder.value;this.formdata.append("firstName",e.firstName),this.formdata.append("lastName",e.lastName),this.formdata.append("file",e.file),console.log(e),this.apiservice.updateProfile(this.formdata).subscribe()}}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-profile"]],decls:19,vars:1,consts:[[1,"max-w-md","mx-auto","mt-8"],[1,"text-2xl","font-bold","mb-4"],[1,"space-y-4",3,"formGroup","ngSubmit"],[1,"flex","items-center","space-x-4"],["for","profilePhoto",1,"w-32","text-gray-700"],["type","file","id","profilePhoto","formControlName","file","accept","file/*",3,"change"],["for","firstName",1,"w-32","text-gray-700"],["type","text","id","firstName","formControlName","firstName",1,"flex-1","px-4","py-2","bg-gray-100","border","border-gray-300","rounded-lg"],["for","lastName",1,"w-32","text-gray-700"],["type","text","id","lastName","formControlName","lastName",1,"flex-1","px-4","py-2","bg-gray-100","border","border-gray-300","rounded-lg"],[1,"flex","justify-end"],["type","submit",1,"px-6","py-3","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600","focus:outline-none","focus:bg-blue-600"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Update Profile"),t.qZA(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(4,"div",3)(5,"label",4),t._uU(6,"Profile Photo:"),t.qZA(),t.TgZ(7,"input",5),t.NdJ("change",function(a){return o.onFileChange(a)}),t.qZA()(),t.TgZ(8,"div",3)(9,"label",6),t._uU(10,"First Name:"),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.TgZ(12,"div",3)(13,"label",8),t._uU(14,"Last Name:"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",10)(17,"button",11),t._uU(18,"Update"),t.qZA()()()()),2&i&&(t.xp6(3),t.Q6J("formGroup",o.FMbuilder))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]})}return n})();const Wt=function(){return["/chat"]},Gt=function(n){return{param1:n,userType:"user"}},Ht=function(){return["/user/home/payment-details"]};function Kt(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",3)(2,"td",4),t._uU(3),t.qZA(),t.TgZ(4,"td",4),t._uU(5),t._UZ(6,"br"),t._uU(7),t._UZ(8,"br"),t._uU(9),t._UZ(10,"br"),t._uU(11),t._UZ(12,"br"),t._uU(13),t.qZA(),t.TgZ(14,"td")(15,"button",7),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showing(s._id))}),t._uU(16,"Show monthy winners"),t.qZA()(),t.TgZ(17,"td")(18,"button",8),t._uU(19,"Chat with Owner"),t.qZA()(),t.TgZ(20,"td")(21,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.setChitId(s._id,s.monthlyPayment))}),t._uU(22,"Payment Details"),t.qZA()()(),t.BQk()}if(2&n){const e=r.$implicit,i=r.index;t.xp6(3),t.Oqu(i+1),t.xp6(2),t.hij("Chit Name:",e.chitName," "),t.xp6(2),t.hij(" Monthly Payment:",e.monthlyPayment," "),t.xp6(2),t.hij(" Total Amount:",e.totalAmount," "),t.xp6(2),t.hij(" Duration:",e.duration," "),t.xp6(2),t.hij(" No of Participants:",e.participants,""),t.xp6(5),t.Q6J("routerLink",t.DdM(9,Wt))("queryParams",t.VKq(10,Gt,e._id)),t.xp6(3),t.Q6J("routerLink",t.DdM(12,Ht))}}function zt(n,r){if(1&n&&(t.TgZ(0,"tr",16)(1,"td",17),t._uU(2),t.qZA(),t.TgZ(3,"td",17),t._uU(4),t.qZA(),t.TgZ(5,"td",17),t._uU(6),t.qZA(),t.TgZ(7,"td",17),t._uU(8),t.qZA(),t.TgZ(9,"td",17),t._uU(10),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.userId),t.xp6(2),t.Oqu(e.firstName),t.xp6(2),t.Oqu(e.lastName),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.month)}}function Bt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",11)(2,"table",12)(3,"thead")(4,"tr",13)(5,"th",4),t._uU(6,"User ID"),t.qZA(),t.TgZ(7,"th",4),t._uU(8,"First Name"),t.qZA(),t.TgZ(9,"th",4),t._uU(10,"Last Name"),t.qZA(),t.TgZ(11,"th",4),t._uU(12,"Email"),t.qZA(),t.TgZ(13,"th",4),t._uU(14,"Month"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,zt,11,5,"tr",14),t.qZA()(),t.TgZ(17,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.close())}),t._uU(18,"close"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(16),t.Q6J("ngForOf",e.winners)}}let Xt=(()=>{class n{constructor(e,i,o){this.apiservice=e,this.dataService=i,this.router=o,this.show=!1,this.winners=[]}ngOnInit(){this.apiservice.JoinedChits().subscribe({next:e=>{this.list=e,console.log(this.list)}})}setChitId(e,i){this.dataService.setData3({chitId:e,amount:i})}showing(e){this.show?this.show&&(this.show=!1):(this.show=!0,this.apiservice.getWinners(e).subscribe({next:i=>{this.winners=i}}))}close(){this.show=!this.show}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f),t.Y36(x),t.Y36(m.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-joined-chits"]],decls:15,vars:2,consts:[[1,"text-lg","font-semibold","mb-2"],[1,"divide-y","divide-gray-200"],[1,"w-full","divide-y","divide-gray-200","border-[2px]","border-slate-400"],[1,"text-center"],[1,"px-4","py-2"],[4,"ngFor","ngForOf"],["class","mt-16",4,"ngIf"],[1,"bg-blue-600","p-4","rounded-xl",3,"click"],[1,"bg-blue-600","p-4","rounded-xl",3,"routerLink","queryParams"],[1,"bg-blue-600","p-4","rounded-xl",3,"routerLink","click"],[1,"mt-16"],[1,"overflow-x-auto","flex","flex-col","items-center"],[1,"table-auto","w-full","border-collapse","border","border-gray-500"],[1,"bg-gray-200"],["class","hover:bg-gray-100",4,"ngFor","ngForOf"],[1,"bg-red-500","p-1","rounded-md","mx-auto","text-white",3,"click"],[1,"hover:bg-gray-100"],[1,"border","px-4","py-2","text-center"]],template:function(i,o){1&i&&(t.TgZ(0,"div")(1,"h2",0),t._uU(2,"List of Joined Chits"),t.qZA(),t.TgZ(3,"div",1)(4,"table",2)(5,"thead")(6,"tr",3)(7,"th",4),t._uU(8,"No"),t.qZA(),t.TgZ(9,"th",4),t._uU(10,"ChitId"),t.qZA(),t._UZ(11,"th"),t.qZA()(),t.TgZ(12,"tbody"),t.YNc(13,Kt,23,13,"ng-container",5),t.qZA()()(),t.YNc(14,Bt,19,1,"div",6),t.qZA()),2&i&&(t.xp6(13),t.Q6J("ngForOf",o.list),t.xp6(1),t.Q6J("ngIf",o.show))},dependencies:[m.rH,p.sg,p.O5]})}return n})();function Vt(n,r){1&n&&t._UZ(0,"app-spinner")}function te(n,r){1&n&&t._UZ(0,"app-spinner")}function ee(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",4)(1,"div",5)(2,"p",6),t._uU(3),t.qZA(),t.TgZ(4,"p",7),t._uU(5),t.qZA(),t.TgZ(6,"p",7),t._uU(7),t.qZA()(),t.TgZ(8,"button",8),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.acceptInvitation(s._id))}),t._uU(9," Accept "),t.qZA(),t.YNc(10,Vt,1,0,"app-spinner",9),t.TgZ(11,"button",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.rejectInvitation(s._id))}),t._uU(12," Reject "),t.qZA(),t.YNc(13,te,1,0,"app-spinner",9),t.qZA()}if(2&n){const e=r.$implicit,i=t.oxw();t.xp6(3),t.hij("Chit ID: ",e.chitId,""),t.xp6(2),t.hij("Invited User ID: ",e.invitedUserId,""),t.xp6(2),t.hij("Status: ",e.status,""),t.xp6(3),t.Q6J("ngIf",i.isLoading),t.xp6(3),t.Q6J("ngIf",i.isLoading)}}let ie=(()=>{class n{constructor(e){this.apiservice=e,this.invitations=[],this.noOfInvitation=0,this.isLoading=!1}ngOnInit(){this.fetchInvitation()}fetchInvitation(){this.apiservice.getInvitations().subscribe({next:e=>{this.invitations=e,console.log(e,this.invitations),this.noOfInvitation=this.invitations.length},error:e=>{this.invitations=[]}})}acceptInvitation(e){this.isLoading=!0,this.apiservice.acceptInvitation({invitationId:e}).subscribe(),this.fetchInvitation(),this.isLoading=!1}rejectInvitation(e){this.isLoading=!0,this.apiservice.rejectInvitation({invitationId:e}).subscribe(),this.fetchInvitation(),this.isLoading=!1}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(f))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-invitation-to-join"]],decls:7,vars:2,consts:[[1,"mt-4"],[1,"text-lg","font-semibold","mb-2"],[1,"divide-y","divide-gray-200"],["class","py-4 flex justify-between items-center",4,"ngFor","ngForOf"],[1,"py-4","flex","justify-between","items-center"],[1,"flex","items-center","space-x-4"],[1,"text-gray-800"],[1,"text-gray-700"],[1,"px-4","py-2","bg-purple-500","text-white","rounded-lg","hover:bg-purple-600","focus:outline-none","focus:bg-purple-600",3,"click"],[4,"ngIf"],[1,"px-4","py-2","bg-red-500","text-white","rounded-lg","hover:bg-red-600","focus:outline-none","focus:bg-red-600",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"h3"),t._uU(1),t.qZA(),t.TgZ(2,"div",0)(3,"h2",1),t._uU(4,"Invitations"),t.qZA(),t.TgZ(5,"ul",2),t.YNc(6,ee,14,5,"li",3),t.qZA()()),2&i&&(t.xp6(1),t.hij("You have ",o.noOfInvitation," pending Invitation to Join"),t.xp6(5),t.Q6J("ngForOf",o.invitations))},dependencies:[p.sg,p.O5,b.O]})}return n})(),oe=(()=>{class n{get nativeWindow(){return function ne(){return window}()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function se(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.createRazPayOredr(o.month))}),t._uU(1,"Pay Now"),t.qZA()}}function re(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td",7),t._uU(2),t.qZA(),t.TgZ(3,"td",7),t._uU(4),t.qZA(),t.TgZ(5,"td",7),t.YNc(6,se,2,0,"button",8),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.month),t.xp6(2),t.Oqu(e.isPaid?"Paid":"Pending"),t.xp6(2),t.Q6J("ngIf",!e.isPaid)}}const ae=[{path:"home",component:L,children:[{path:"",component:tt},{path:"confirm-email",component:R},{path:"beanowner",component:mt},{path:"start-chitty",component:_t},{path:"owned-chitties",component:It},{path:"open-chitties",component:St},{path:"list-users",component:Yt},{path:"addusers",component:Et},{path:"update-profile",component:Qt},{path:"joined-chits",component:Xt,children:[]},{path:"invitation-to-join",component:ie},{path:"payment-details",component:(()=>{class n{constructor(e,i,o){this.dataService=e,this.apiservice=i,this.winRef=o,this.monthlyStatus=[]}ngOnInit(){this.dataService.chitIdToFetchPayment$.subscribe(e=>{this.chitId=e.chitId,this.amount=e.amount,console.log("amount",this.amount)}),this.apiservice.getMonthlyStatus(this.chitId).subscribe({next:e=>this.monthlyStatus=e,error:e=>this.monthlyStatus=[]})}createRazPayOredr(e){this.apiservice.createRazPayOrder({chitId:this.chitId,amount:100*this.amount,month:e}).subscribe({next:i=>{console.log(i),this.payWithRazor(i.orderId,i.month)},error:i=>{console.log(i)}})}payWithRazor(e,i){const o={key:"rzp_test_FKrhS5O7g7WsJU",amount:100*this.amount,currency:"INR",name:"Chitify",description:"",image:"",order_id:e,modal:{escape:!1},notes:{},theme:{color:"#0c238a"}};o.handler=(a,l)=>{o.response=a,console.log(a),this.apiservice.onsuccessPayment({month:i,chitId:this.chitId,amount:100*this.amount}).subscribe()},o.modal.ondismiss=()=>{console.log("transaction cancelled")},new this.winRef.nativeWindow.Razorpay(o).open()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(x),t.Y36(f),t.Y36(oe))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-payment-details"]],decls:15,vars:1,consts:[[1,"overflow-y-auto"],[1,"text-2xl","font-bold","mb-4"],[1,"overflow-x-auto"],[1,"table-auto","w-full","border-collapse","border","border-gray-300"],[1,"bg-gray-100"],[1,"px-4","py-2"],[4,"ngFor","ngForOf"],[1,"border","px-4","py-2","text-center"],["class","bg-blue-400 p-2 rounded-lg",3,"click",4,"ngIf"],[1,"bg-blue-400","p-2","rounded-lg",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Monthly Status"),t.qZA(),t.TgZ(3,"div",2)(4,"table",3)(5,"thead")(6,"tr",4)(7,"th",5),t._uU(8,"Month"),t.qZA(),t.TgZ(9,"th",5),t._uU(10,"Status"),t.qZA(),t.TgZ(11,"th",5),t._uU(12,"Actions"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,re,7,3,"tr",6),t.qZA()()()()),2&i&&(t.xp6(14),t.Q6J("ngForOf",o.monthlyStatus))},dependencies:[p.sg,p.O5]})}return n})()}]},{path:"email-otp",component:lt}];let ce=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(ae),m.Bz]})}return n})();var le=h(2456);let ue=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({providers:[x,f],imports:[ce,c.u5,c.UX,p.ez,le.p]})}return n})()}}]);